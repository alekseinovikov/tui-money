# Repository Guidelines

## Project Purpose & Tech Stack
- Goal: build a TUI app for managing and monitoring money and budget by recording expenses and incomes, viewing categories, and displaying graphs/insights.
- Storage: SQLite.
- UI framework: Ratatui.

## Project Structure & Module Organization
- Workspace layout:
  - `crates/app/` — binary crate; wiring and entry point (`crates/app/src/main.rs`).
  - `crates/domain/` — core types and business rules (no IO).
  - `crates/storage/` — SQLite persistence layer (repository implementations).
  - `crates/ui/` — Ratatui views, layouts, and input handling.
  - `crates/analytics/` — aggregations and chart data for budgets and insights.
- `Cargo.toml` at the repo root defines the workspace and shared dependencies.
- `Cargo.lock` pins dependency versions (commit this file for reproducible builds).
- `target/` is build output generated by Cargo; it should not be edited directly.
- Runtime data: the app currently creates `tui-money.db` in the repo root; do not commit this file.

## Architecture & Data Flow
- `domain` defines core types and the `EntryRepository` trait.
- `storage` implements `EntryRepository` using SQLite (rusqlite).
- `ui` renders screens with Ratatui and reacts to input; it should avoid direct SQL.
- `app` wires storage, analytics, and UI together.

## Build, Test, and Development Commands
- `cargo build` — compile all workspace crates in debug mode.
- `cargo run -p tui-money` — build (if needed) and run the app locally.
- `cargo test` — run the test suite (none are defined yet).
- `cargo check` — fast compile check without producing a binary.
- `cargo fmt --all` — format Rust code with rustfmt (use before commits).
- `cargo clippy --all-targets --all-features -D warnings` — lint for common issues; treat warnings as errors.
- `cargo clean` — remove `target/` build artifacts.

## Coding Style & Naming Conventions
- Rust 2024 edition is enabled (see `Cargo.toml`).
- Indentation: 4 spaces (Rust default). Keep lines readable and concise.
- Naming: follow Rust conventions (modules and functions in `snake_case`, types in `PascalCase`, constants in `SCREAMING_SNAKE_CASE`).
- Formatting: use `cargo fmt` (rustfmt) before submitting changes if added to the workflow.
- Linting: use `cargo clippy --all-targets --all-features -D warnings` before submitting changes.

## Testing Guidelines
- No tests are present yet. When adding tests, prefer Rust’s built-in test framework in `src/` or `tests/`.
- Name tests descriptively with `snake_case` (e.g., `it_formats_currency`), and keep test data close to the behavior under test.
- Run tests with `cargo test`.
- Action: run `cargo test` after every code change.

## Commit & Pull Request Guidelines
- There is no Git history yet, so no established commit message convention exists. Use clear, imperative messages (e.g., `Add initial TUI skeleton`).
- PRs should include: a brief summary, the reason for the change, and any relevant screenshots or terminal output if UI/behavior changes.
- Link related issues if applicable.

## Security & Configuration Tips
- Avoid committing secrets or local configuration into the repo.
- Keep `Cargo.lock` updated when dependencies are added or changed.
